<!doctype html>

<head>
    <title>Sistine</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="/css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=Newsreader:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <!-- Facebook Open Graph tags -->
    <meta property="og:url" content="https://sistine.vercel.app" />
    <meta property="og:title" content="Sistine, the static site engine" />
    <meta property="og:description" content="A simple, flexible, productive static site engine written in Ink" />
    <meta property="og:image" content="https://sistine.vercel.app/img/sistine-screenshot.png" />

    <!-- Twitter Card (large image card) tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@thesephist">
    <meta name="twitter:title" content="Sistine, the static site engine">
    <meta name="twitter:description" content="A simple, flexible, productive static site engine written in Ink" />
    <meta name="twitter:image" content="https://sistine.vercel.app/img/sistine-screenshot.png" />
</head>


<body>
<main>
    <header>
    <nav class="left-nav">
        <a href="/"><strong>Sistine</strong></a>
        <a href="/docs/">Docs</a>
        <a href="/start/">Get started</a>
    </nav>
    <nav class="right-nav">
        <a href="https://github.com/thesephist/sistine">GitHub</a>
    </nav>
</header>


    <article>
        
<div class="breadcrumbs">
    
        
        
    
        
        <span class="breadcrumb-item">
            <a href="/notes/">Notes</a>
        </span>
        
    
</div>


        
        <p>https://github.com/rprtr258/q</p><p><a href="machine%20learning%20%26%20data%20science">machine learning</a>https://jqlang.github.io/jq/manual/ https://zed.brimdata.io https://zui.brimdata.io/</p><p>main idea is: many models are represented as graphs: vertices are entities, edges are relations between them, so as a graph can be modelled:</p><ul><li>all SQL databases</li><li>package managers with package dependencies relations and other metadatas (package repos, authors, etc)</li><li>resources in k8s</li><li>command outputs like <code>ls</code>, <code>ps</code>, etc</li></ul><p>there are plenty of scenarios to query these things in a similar way:</p><ul><li>find all groups which user is member of</li><li>find dependencies of particular package</li><li>find resources used by another k8s resource</li><li>find processes cmd using file or port</li></ul><p>example schema:</p><pre><code data-lang="graphql">type User {
    name String
    region Region
}

type Region {
    id Uint64
    name String
}</code></pre><p>example queries:</p><pre><code data-lang="php">user[name,region.name]
user[name,region.name,name="Petya"?]
user[name,role.permission[name="Delete DB"?]]
user[name,region.name,name=/Petya/?]
user[name,role.permission[*, name=/Delete DB/?]]</code></pre><p>in <code>jq</code></p><pre><code data-lang="jq">$users | map([.name,.region.name])
$users | map(select(.name=="Petya")) | map([.name,.region.name])
$users | map(select($roles[.id].permission | contains("Delete DB"))) | map(.name)
$users | map(select(.name|match(".*Petya.*"))) | map([.name,.region.name])
$users | map(select($roles[.id].permission | any(match(".*Delete DB.*")))) | map(.name)</code></pre><p>unxpectedly hard query</p><pre><code data-lang="sql">entities
    film
        id       ID
        title    string
        actors   [ID]
        director ID
    person
        id   ID
        name string

find man with film he acted in and other film he directed
logic is following:
SELECT
    m1.title
    m2.title
    p.name
FROM
    m1@movie
    m2@movie
    p@profile
WHERE
    m1.id!=m2.id
    m1.actors.*=p.id
    m2.director=p.id

jq:
(.film | map(.id as $film_id | .actors | map({($film_id): .})) | add | add) as $actoring |
(.film | map({(.director): .id}) as $directors |
$actoring | keys | map(. as $actor_id | select($directors | contains($actor_id)))</code></pre><p>so it makes sense to make succint query language taking graph structure in account</p><ul><li>sql is way verbose and has no explicit ways to use relations(haha) between entities</li><li>graphql is verbose, no way to dinamically filter data</li><li>other graph query languages focuses on many entities involved in graph structure, so they are solving completely different tasks: find paths, find vertex on path between such that, etc</li></ul><p>see nushell https://miro.medium.com/v2/resize:fit:679/1*yjJs6XwNTu-qeliPdYbYYg.gif https://home.adelphi.edu/~siegfried/cs443/443l9.pdf https://habr.com/ru/articles/759342/ https://kroki.io/examples.html#excalidraw https://kroki.io/examples.html#erd graphics ![[data/static/old/projects/q/schema-sketch.png]] ![[data/static/old/projects/q/pb.png]] https://github.com/alecthomas/participle https://sq.io/ file-tree like tui</p><p><a href="https://habr.com/ru/companies/badoo/articles/461699/">Вулканический поросенок, или SQL своими руками</a></p><p>additional literals @now - the current datetime as string @second - @now second number (0-59) @minute - @now minute number (0-59) @hour - @now hour number (0-23) @weekday - @now weekday number (0-6) @day - @now day number @month - @now month number @year - @now year number @todayStart - beginning of the current day as datetime string @todayEnd - end of the current day as datetime string @monthStart - beginning of the current month as datetime string @monthEnd - end of the current month as datetime string @yearStart - beginning of the current year as datetime string @yearEnd - end of the current year as datetime string operators length() - number of connected entities</p><ul><li><code>&amp;&amp;</code>, <code>||</code> - and, or</li><li><code>=</code> Equal</li><li><code>!=</code> NOT equal</li><li><code>></code> Greater than</li><li><code>>=</code> Greater than or equal</li><li><code>&lt;</code> Less than</li><li><code>&lt;=</code> Less than or equal</li><li><code>~</code> Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard match)</li><li><code>!~</code> NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard match)</li><li><code>?=</code> <em>Any/At least one of</em> Equal</li><li><code>?!=</code> <em>Any/At least one of</em> NOT equal</li><li><code>?></code> <em>Any/At least one of</em> Greater than</li><li><code>?>=</code> <em>Any/At least one of</em> Greater than or equal</li><li><code>?&lt;</code> <em>Any/At least one of</em> Less than</li><li><code>?&lt;=</code> <em>Any/At least one of</em> Less than or equal</li><li><code>?~</code> <em>Any/At least one of</em> Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard match)</li><li><code>?!~</code> <em>Any/At least one of</em> NOT Like/Contains (if not specified auto wraps the right string OPERAND in a "%" for wildcard match)</li></ul><p>To group and combine several expressions you could use brackets <code>(...)</code>, <code>&amp;&amp;</code> (AND) and <code>||</code> (OR) tokens.</p><p>sorting<code>&lt;field></code> - ascending<code>-&lt;field></code> - descending</p><p>https://www.aleksandra.codes/comments-db-model https://github.com/getnokori/api https://github.com/iximiuz/kexp strings querying https://lucene.apache.org/core/2<em>9</em>4/queryparsersyntax.html https://mermaid.js.org/syntax/entityRelationshipDiagram.html sample queries https://www.orientdb.com/docs/last/gettingstarted/demodb/queries/index.html https://dgraph.io/docs/query-language/functions/ https://docs.jargon.sh/#/pages/language https://drawsql.app/ visualization of relational database schema https://steampipe.io/docs/develop/writing-plugins https://hub.steampipe.io/plugins?categories=software+development http://number-none.com/product/Lerp,%20Part%203/index.html<a href="https://storage.googleapis.com/gweb-research2023-media/pubtools/pdf/fa380016eccb33ac5e92c84f7b5eec136e73d3f1.pdf">F1 Query: Declarative Querying at Scale</a><a href="https://github.com/harelba/q">harelba/q: q - Run SQL directly on delimited files and multi-file sqlite databases</a>http://docs.jsonata.org/programming https://jmespath.org/tutorial.html https://prql-lang.org/book/overview.html</p>
    </article>

    <footer>
    <p>
        Sistine is a project by
        <a href="https://thesephist.com/" target="_blank">Linus</a>
        built with
        <a href="https://dotink.co/" target="_blank">Ink</a>.
    </p>
</footer>

</main>

<script src="/js/main.js"></script>

</body>
