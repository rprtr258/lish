#someday_maybe #project

### https://digdeeper.neocities.org/ghost/browsers_rus.html#webbrowser

@Anonymous
Андрей Викторович, добрый день!

У меня к вам такой чисто теоретический вопрос, как к эксперту в программировании.

Скажите пожалуйста, если рассмотреть ситуацию с разработкой браузера с нуля, при этом придерживаясь исключительно корректного, неизбыточного и оптимального кода, с изначально чрезвычайно дотошно продуманной архитектурой приложения, то возможен ли итоговый браузер чтобы работал достаточно шустро на железе уровня P2, с 256Mb ОЗУ?

Если рассматривать как конечный результат - полная поддержка CSS3 и HTML5.

Вопрос повторюсь - чисто теоретический, и выбор типа ПО - браузер, исключительно потому что сейчас это наиболее прожорливое приложение на практически любом ПК.

@admin
Кто б спорил

CSS3 нормальные люди не юзают,

Нормальные люди и JS не юзают, и HTML (я бы сказал, вообще любой, а когда совсем припрёт — xhtml1). Да можно и больше сказать, нормальные люди в наше время вообще сайтостроительством не занимаются, в этой области, считай, остались одни макаки.

К сожалению, на сайты ходить иногда приходится. А они макаками сделаны чуть менее чем все.

HTML5 - это вообще диверсия

Я больше скажу, все SGML-образные языки разметки, включая и все варианты HTML, и XML, и всё, что рядом с ними — всякие DTD/DOM/whatever — это всё одна большая диверсия. Но, конечно, HTML5 — это просто преднамеренное вредительство глобального масштаба с целым букетом отягчающих обстоятельств. Как, собственно, и всё, что сейчас в мире делается по части стандартов (всех поголовно) и спецификаций (не всех, но многих).

@Anonymous
Хотел бы

Хотел бы узнать, чем именно плохи языки разметки, и что можно считать альтернативой по Вашему мнению для создания машиночитаемых документов?

@admin
Вопрос не имеет отношения к делу

Языки разметки как таковые — разумеется, ничем не плохи; речь идёт в данном случае о потомках SGML с этими его тэгами в угловых скобках, это семейство очевидных бастардов: вроде бы текст, то есть предназначено для написания и чтения человеком, но писать это невозможно, руки устают от угловых скобок, да и читать это тоже не шибко удобно.

Кроме того — и это более серьёзно — XML сейчас норовят применить для любых данных, а не только для разметки текста. Например, конфигурационные файлы для программ встречаются xml-ные. Или — просто частный пример, который первым пришёл в голову — электронная отчётность во всякие налоговые и фсс/пфр нужно направлять в виде файлов, имеющих xml-ный формат. И т.п. Так вот, если для представления текста (документа, если угодно), предназначенного к прочтению человеком, форматы с неограниченной рекурсивной вложенностью структур оправданны и понятно, зачем нужны, то для всего остального сие не имеет никаких причин и никаких оправданий, только усложняет софт на ровном месте. И это уже касается не только xml, тот же JSON тоже рекурсивно определённый и позволяет неограниченную вложенность.

Ну и последнее: судя по формулировке вашего вопроса (особенно учитывая, что формулировка приписывает мне утверждения, которых я не делал), у меня чёткое ощущение, что сюда вы забрели напрасно. В Интернете есть много других сайтов. В данном конкретном случае пояснения могут быть полезны для публики, но вообще я обычно подобные "вопросы" не раскрываю и на них не отвечаю, не теряйте время зря.


Я практически уверен, что это возможно, причём за счёт одной очень небольшой (на первый взгляд небольшой, а в действительности определяющей) поправки.

Если вы в браузере (да, вот прямо в этом "современном" поделье от лучших моральных уродов мира) отключите выполнение JS, тормозить ОНО перестанет. Практически на любом сайте. Теоретически можно, задавшись целью, на CSS3 сотворить что-то такое, что начнёт жрать ресурсы как следует, но в реальной жизни такого не бывает.

В принципе было бы правильно поступить именно так: убрать поддержку JS и вообще любого тьюринг-полного исполнения на стороне клиента, а всех, кто что-то по этому поводу вякнет, тупо пристрелить как крыс (замечу, вреда от них гораздо больше, чем от крыс; и да, это практически всех нынешних веб-макак придётся перестрелять, но лично мне их было бы нисколько не жаль). Но, насколько я понимаю ваш вопрос, вы имеете в виду именно поддежку веба в его "современном" (и весьма прискорбном) состоянии.

Так вот, это тоже можно сделать с копеечными затратами ресурсов. Нужно только написать свой собственный интерпретатор JS, который с точки зрения приложения, в которое он встроен, представляет собой не то, что сейчас — некую процедуру, которой мы вынуждены отдать управление и надеяться, что она когда-нибудь завершится — а сущность совершенно иную: виртуальная машина должна быть оформлена как конечный автомат (точнее говоря, скорее "формальный автомат", поскольку "конечный автомат" — это строгий термин, и в этом смысле с его помощью реализовать тьюринг-полный язык нельзя, поскольку сами КА не тьюринг-полные), меняющий своё состояние по мере неких элементарных "шагов", каждый такой "шаг" выполняется за очень короткое (и уж точно заведомо детерминированное) время. Браузер реализуется однопоточным и никогда не отдаёт управление скриптам на JS — вместо этого он, обработав все входящие события вроде воздействий на GUI и данных, пришедших из сокетов, позволяет автоматам, выполняющим все активные в настоящий момент скрипты, сделать по одному шагу. Если событий нет, а активные скрипты есть -- фигачим, скажем, по 100 или 200 шагов, равномерно распределив их между активными скриптами, после чего снова проверяем, нет ли событий, подлежащих обработке. В toolbar'е браузера размещаем ВОООТ ТАКУУУУУЮ кнопку "stop scripts now".

Эта конструкция ни тормозить, ни подвисать, ни выжирать весь процессор не будет. Некоторые сайты, слепленные особо криворукими макаками, будут рендериться намного дольше, чем сейчас (возможно, в десятки раз), но читать их можно будет прямо сразу, так что пользователь даже неудобств никаких в большинстве случаев не заметит.


